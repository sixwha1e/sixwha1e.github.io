<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  
  <title>不务正业的微信平台开发试水(一) | sixwhale&#39;s pages</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="玩了半个月的微信公众号 原目的是为了弄一个校园交友的平台（尼玛不是约炮平台=.=）但是又因为是试水 所以脑抽又加了一些没有卵用的功能哈哈 进展如下：
已实现: 

根据用户的交友条件匹配出符合条件的对方用户
向对方发出邀请 公众号会反馈给被邀请的用户一条提示（前两条都是基于获取用户唯一标识openid）
个性化菜单
翻译功能（对 就是英译汉 汉译英… =.=）
天气预告（破API 城市不全 信息不">
<meta property="og:type" content="article">
<meta property="og:title" content="不务正业的微信平台开发试水(一)">
<meta property="og:url" content="http://yoursite.com/2016/04/18/不务正业的微信平台开发试水(一)/index.html">
<meta property="og:site_name" content="sixwhale's pages">
<meta property="og:description" content="玩了半个月的微信公众号 原目的是为了弄一个校园交友的平台（尼玛不是约炮平台=.=）但是又因为是试水 所以脑抽又加了一些没有卵用的功能哈哈 进展如下：
已实现: 

根据用户的交友条件匹配出符合条件的对方用户
向对方发出邀请 公众号会反馈给被邀请的用户一条提示（前两条都是基于获取用户唯一标识openid）
个性化菜单
翻译功能（对 就是英译汉 汉译英… =.=）
天气预告（破API 城市不全 信息不">
<meta property="og:image" content="http://pic.yupoo.com/sixwhale_s/Fu4hK0cQ/medish.jpg">
<meta property="og:image" content="http://pic.yupoo.com/sixwhale_s/Fu4hJXUy/medish.jpg">
<meta property="og:image" content="http://pic.yupoo.com/sixwhale_s/Fu4nzrDJ/od374.jpg">
<meta property="og:image" content="http://pic.yupoo.com/sixwhale_s/Fu4rEsv3/medish.jpg">
<meta property="og:image" content="http://pic.yupoo.com/sixwhale_s/Fu4wudNl/medish.jpg">
<meta property="og:image" content="http://pic.yupoo.com/sixwhale_s/Fu4BwEuB/medish.jpg">
<meta property="og:updated_time" content="2016-08-05T10:42:34.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="不务正业的微信平台开发试水(一)">
<meta name="twitter:description" content="玩了半个月的微信公众号 原目的是为了弄一个校园交友的平台（尼玛不是约炮平台=.=）但是又因为是试水 所以脑抽又加了一些没有卵用的功能哈哈 进展如下：
已实现: 

根据用户的交友条件匹配出符合条件的对方用户
向对方发出邀请 公众号会反馈给被邀请的用户一条提示（前两条都是基于获取用户唯一标识openid）
个性化菜单
翻译功能（对 就是英译汉 汉译英… =.=）
天气预告（破API 城市不全 信息不">
  
    <link rel="alternate" href="/atom.xml" title="sixwhale&#39;s pages" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="/css/typing.css" type="text/css">
</head>

  
    
      <body>
    
  
      <div id="container" class="container">
        <article id="post-不务正业的微信平台开发试水(一)" class="article article-type-post" itemscope itemprop="blogPost">
  <header id="header" class="header">
  <nav id="main-nav" class="main-nav">
    
      <a class="main-nav-link" href="/">Home</a>
    
      <a class="main-nav-link" href="/archives">Archives</a>
    
      <a class="main-nav-link" href="/about">About</a>
    
  </nav>
  <nav id="sub-nav">
    
      <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
    
  </nav>
</header>

  <hr/>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      不务正业的微信平台开发试水(一)
    </h1>
  

      </header>
    
    <div class="article-entry typo" itemprop="articleBody">
      
        <p>玩了半个月的微信公众号 原目的是为了弄一个校园交友的平台（尼玛不是约炮平台=.=）但是又因为是试水 所以脑抽又加了一些没有卵用的功能哈哈 进展如下：</p>
<p>已实现: </p>
<ul>
<li>根据用户的交友条件匹配出符合条件的对方用户</li>
<li>向对方发出邀请 公众号会反馈给被邀请的用户一条提示（前两条都是基于获取用户唯一标识<code>openid</code>）</li>
<li>个性化菜单</li>
<li>翻译功能（对 就是英译汉 汉译英… =.=）</li>
<li>天气预告（破API 城市不全 信息不准…）</li>
</ul>
<p>待实现:</p>
<ul>
<li>发送邀请后 对方接受邀请 如何使双方在后台互相验证 实时标记这对用户已约</li>
<li>发送邀请后 可以使双方用户查看对方微信名片</li>
<li>目前只为实现功能 还未考虑率用户群体变大后的查询优化</li>
<li>等等…</li>
</ul>
<h2 id="0x00_OpenID_&amp;&amp;_UnionID(fakeid)">0x00 OpenID &amp;&amp; UnionID(fakeid)</h2><hr>
<p><code>openid</code>和<code>unionid（有的地方写成fakeid）</code>的关系以及区别：<br><img src="http://pic.yupoo.com/sixwhale_s/Fu4hK0cQ/medish.jpg" alt=""><br><strong>以上三个unionid是相同的</strong><br><img src="http://pic.yupoo.com/sixwhale_s/Fu4hJXUy/medish.jpg" alt=""><br><strong>以上三个openid不相同</strong></p>
<p>这仅是我个人总结 如有不对的地方 望大神指出 <strong>(U •́ .̫ •̀ U)</strong></p>
<p>因为我的公众账号是未认证的服务号 所以很多接口没有权限 譬如用户的全部信息 但是目前不影响整体功能 红色圈出的部分就是我们所需的用户标识<br><img src="http://pic.yupoo.com/sixwhale_s/Fu4nzrDJ/od374.jpg" alt=""></p>
<h2 id="0x01_获取">0x01 获取</h2><hr>
<p>如何获取openid？微信官方有一个<strong><a href="http://mp.weixin.qq.com/mpres/htmledition/res/wx_sample.20140819.zip" target="_blank" rel="external">php文件</a></strong> 是放在你所配置的服务器上 用于与微信对接的<br><img src="http://pic.yupoo.com/sixwhale_s/Fu4rEsv3/medish.jpg" alt=""><br><img src="http://pic.yupoo.com/sixwhale_s/Fu4wudNl/medish.jpg" alt=""></p>
<figure class="highlight xquery"><table><tr><td class="code"><pre><span class="line"><span class="variable">$openid</span> = <span class="variable">$postObj-</span>&gt;FromUserName;</span><br><span class="line"></span><br><span class="line">//在 welcome <span class="keyword">to</span> wechat world 输出openid即可</span><br><span class="line">//如果想要在服务器上获得其值 GET或者POST过去</span><br></pre></td></tr></table></figure>
<h2 id="0x02_主动发送消息给指定用户">0x02 主动发送消息给指定用户</h2><hr>
<p>关于这个 我其实用了别人的想法以及<strong><a href="http://pan.baidu.com/s/1o7Typjs" target="_blank" rel="external">代码</a></strong> 模拟登陆微信公众号&amp;发送 利用的就是微信公众平台的后台回复消息的模型 用PHP实现动作</p>
<p><img src="http://pic.yupoo.com/sixwhale_s/Fu4BwEuB/medish.jpg" alt=""><br>但是这里有个问题 用户群体数量大了以后 会不会模拟登陆这个部分需要验证码 目前还没出现这个问题 所以若要想更方便的解决 希望还是去申请一个认证的服务号吧 我这个未认证的服务号淘宝价格<code>50RMB/个</code> 认证应该是<code>450RMB/个</code> <strong>总之淘宝是个神奇的好地方٩(๑‾ ꇴ ‾๑)۶</strong></p>
<h2 id="0x03_待续">0x03 待续</h2><hr>
<p>这个公众号我会一直开发 不会放弃的 这篇博客也都是我个人的总结 如果哪里写的不对 希望大神指导 部分代码也都贴出来了 大家可以试试 我写的这几个也是我认为比较复杂的部分 简单的就不说了</p>
<p>今天大连下雨了 很大又冷 还好体育课取消 我在这里听着<code>君だったら</code> 有点不开心</p>

      
    </div>
    <footer class="article-footer">
      <ul class="article-meta">
        <li>
          <span class="label">Published Date:</span>
          <a href="/2016/04/18/不务正业的微信平台开发试水(一)/" class="article-date">
  <time datetime="2016-04-18T02:27:00.000Z" itemprop="datePublished">2016-04-18</time>
</a>

        </li>
        
        
        <hr/>
      </ul>
    </footer>
  </div>
  
    
<nav id="article-nav" class="article-nav">
  
    <a href="/2016/08/05/好奇宝宝的docker初探/" id="article-nav-newer" class="article-nav-link-wrap newer">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          好奇宝宝的docker初探
        
      </div>
    </a>
  
  
    <a href="/2016/02/16/代码审计入门总结/" id="article-nav-older" class="article-nav-link-wrap older">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">代码审计入门总结</div>
    </a>
  
</nav>


  
</article>


  <section id="comments" class="comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>
  </section>



      </div>
      
    <footer id="footer" class="post-footer footer">
      <hr/>
      <div id="footerContent" class="footer-content">
        <p>ipsum dolor sit amet, <strong>consectetur adipiscing elit.</strong> Fusce eget urna vitae velit <em>eleifend interdum at ac nisi. In nec ligula lacus. Cum sociis natoque</em> penatibus et magnis dis parturient montes, nascetur ridiculus mus. Sed eu cursus erat, ut dapibus quam. Post</p>


      </div>
    </footer>

      
  <script>
   var disqus_shortname = 'sixwhale';
   
   var disqus_url = 'http://yoursite.com/2016/04/18/不务正业的微信平台开发试水(一)/';
   
   (function(){
     var dsq = document.createElement('script');
     dsq.type = 'text/javascript';
     dsq.async = true;
     dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
     (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
   })();
  </script>


<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/typing.js" type="text/javascript"></script>
<!--[if lt IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.min.js"></script><![endif]-->







    </div>
  </body>
</html>
